<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="description" content="–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è —Å–æ—Å—Ç–∞–≤–∞ –Ω–∞ —Ö–æ–∫–∫–µ–π–Ω—É—é –∏–≥—Ä—É">
    <meta name="theme-color" content="#1a1a2e">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="–•–æ–∫–∫–µ–π –°–æ—Å—Ç–∞–≤">
    <title>–•–æ–∫–∫–µ–π–Ω—ã–π –°–æ—Å—Ç–∞–≤</title>
    <link rel="manifest" href="manifest.json">
    <link rel="stylesheet" href="styles.css">
    <link rel="icon" type="image/png" sizes="192x192" href="icon-192.png">
    <link rel="icon" type="image/png" sizes="512x512" href="icon-512.png">
    <link rel="apple-touch-icon" href="icon-192.png">
</head>
<body>
    <!-- –ë–∞–Ω–Ω–µ—Ä —É—Å—Ç–∞–Ω–æ–≤–∫–∏ PWA -->
    <div id="pwaInstallBanner" class="pwa-install-banner" style="display: none;">
        <div class="pwa-install-content">
            <span class="pwa-install-icon">üì±</span>
            <div class="pwa-install-text">
                <strong>–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ</strong>
                <span>–î–æ–±–∞–≤–∏—Ç—å –Ω–∞ –≥–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞</span>
            </div>
            <button id="pwaInstallBtn" class="btn btn-primary pwa-install-btn">–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å</button>
            <button id="pwaDismissBtn" class="pwa-dismiss-btn" title="–ó–∞–∫—Ä—ã—Ç—å">√ó</button>
        </div>
    </div>

    <div class="container">
        <header>
            <div class="header-main">
                <h1>üèí –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ—Å—Ç–∞–≤–∞</h1>
                <button id="menuToggleBtn" class="btn btn-secondary header-menu-toggle" aria-label="–°–ª—É–∂–µ–±–Ω–æ–µ –º–µ–Ω—é">‚ò∞</button>
            </div>
            <div class="header-actions">
                <button id="addPlayerBtn" class="btn btn-primary">+ –î–æ–±–∞–≤–∏—Ç—å –∏–≥—Ä–æ–∫–∞</button>
                <button id="saveAsJpegBtn" class="btn btn-success" style="display: none;">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∫–∞–∫ JPEG</button>
            </div>
            <div id="headerMenu" class="header-menu">
                <button id="exportDataBtn" class="btn btn-secondary" title="–≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ JSON">üì• –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö</button>
                <button id="importDataBtn" class="btn btn-secondary" title="–ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–∑ JSON">üì§ –ò–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö</button>
                <button id="copyTeamCodeBtn" class="btn btn-secondary" title="–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å–ø–∏—Å–æ–∫ –∫–æ–º–∞–Ω–¥—ã –≤ –∫–æ–¥">üìã –ö–æ–¥ –∫–æ–º–∞–Ω–¥—ã</button>
                <button id="showPWAInstallBtn" class="btn btn-secondary" title="–ü–æ–∫–∞–∑–∞—Ç—å —É—Å—Ç–∞–Ω–æ–≤–∫—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è" style="display: none;">üì± –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ</button>
                <button id="pwaCheckBtn" class="btn btn-secondary" title="–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ PWA" onclick="window.location.href='pwa-check.html'">üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ PWA</button>
                <button id="sendRequestBtn" class="btn btn-secondary" title="–ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ —Å–∞–π—Ç –ª–∏–≥–∏" onclick="window.open('https://llhn.ru','_blank')">üì® –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É</button>
            </div>
        </header>

        <main>
            <!-- –°–ø–∏—Å–æ–∫ –∏–≥—Ä (–ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –∫–æ–≥–¥–∞ –Ω–µ—Ç –≤—ã–±—Ä–∞–Ω–Ω–æ–π –∏–≥—Ä—ã) -->
            <div id="gamesSection" class="games-section" style="display: block;">
                <h2>–ò–≥—Ä—ã</h2>
                <button id="newGameBtn" class="btn btn-primary" style="width: 100%; margin-bottom: 15px;">+ –ù–æ–≤–∞—è –∏–≥—Ä–∞</button>
                <div id="gamesList" class="games-list">
                    <!-- –°–ø–∏—Å–æ–∫ –∏–≥—Ä –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                </div>
            </div>

            <!-- –†–∞–±–æ—Ç–∞ —Å —Ç–µ–∫—É—â–µ–π –∏–≥—Ä–æ–π -->
            <div id="gameWorkSection" class="game-work-section" style="display: none;">
                <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –∏–≥—Ä–µ -->
                <div id="gameInfo" class="game-info">
                    <div class="game-header">
                        <input type="text" id="gameTitle" class="game-title-input" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –∏–≥—Ä—ã">
                        <div class="game-meta">
                            <input type="date" id="gameDate" class="game-date-input">
                            <input type="time" id="gameTime" class="game-time-input" placeholder="–í—Ä–µ–º—è">
                            <select id="gameWeekday" class="game-weekday-select" title="–î–µ–Ω—å –Ω–µ–¥–µ–ª–∏">
                                <option value="">–î–µ–Ω—å</option>
                                <option value="–ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫">–ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫</option>
                                <option value="–í—Ç–æ—Ä–Ω–∏–∫">–í—Ç–æ—Ä–Ω–∏–∫</option>
                                <option value="–°—Ä–µ–¥–∞">–°—Ä–µ–¥–∞</option>
                                <option value="–ß–µ—Ç–≤–µ—Ä–≥">–ß–µ—Ç–≤–µ—Ä–≥</option>
                                <option value="–ü—è—Ç–Ω–∏—Ü–∞">–ü—è—Ç–Ω–∏—Ü–∞</option>
                                <option value="–°—É–±–±–æ—Ç–∞">–°—É–±–±–æ—Ç–∞</option>
                                <option value="–í–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ">–í–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ</option>
                            </select>
                            <input type="text" id="gameStadium" class="game-stadium-input" placeholder="–°—Ç–∞–¥–∏–æ–Ω">
                            <input type="text" id="gameScore" class="game-score-input" placeholder="–°—á–µ—Ç">
                            <input type="number" id="gamePoints" class="game-points-input" placeholder="–û—á–∫–∏" min="0" max="2" step="1">
                            <select id="gameColor" class="game-color-select" title="–¶–≤–µ—Ç —Ñ–æ—Ä–º—ã">
                                <option value="">–¶–≤–µ—Ç</option>
                                <option value="–ö—Ä–∞—Å–Ω—ã–π">–ö—Ä–∞—Å–Ω—ã–π</option>
                                <option value="–ë–µ–ª—ã–π">–ë–µ–ª—ã–π</option>
                            </select>
                            <button id="backToGamesBtn" class="btn btn-secondary">‚Üê –ö —Å–ø–∏—Å–∫—É –∏–≥—Ä</button>
                        </div>
                    </div>
                </div>

                <!-- –≠—Ç–∞–ø 1: –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –≥–æ—Ç–æ–≤—ã—Ö (–ö–æ–º–∞–Ω–¥–∞ + –ì–æ—Ç–æ–≤—ã–µ –∏–≥—Ä–∞—Ç—å) -->
                <div id="stage1Section" class="stage-section" style="display: none;">
                    <div class="two-columns-layout">
                        <!-- –ö–æ–ª–æ–Ω–∫–∞ 1: –ö–æ–º–∞–Ω–¥–∞ -->
                        <section class="team-column">
                            <div class="team-header">
                                <h2>–ö–æ–º–∞–Ω–¥–∞</h2>
                                <button id="copyTeamTextBtn" class="btn btn-secondary team-copy-btn" title="–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å–ø–∏—Å–æ–∫ –∫–æ–º–∞–Ω–¥—ã –∫–∞–∫ —Ç–µ–∫—Å—Ç">üìù –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å–ø–∏—Å–æ–∫</button>
                            </div>
                            <div id="teamList" class="team-list">
                                <!-- –ò–≥—Ä–æ–∫–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                            </div>
                        </section>

                        <!-- –ö–æ–ª–æ–Ω–∫–∞ 2: –ì–æ—Ç–æ–≤—ã–µ –∏–≥—Ä–∞—Ç—å -->
                        <section class="ready-column">
                            <h2>–ì–æ—Ç–æ–≤—ã–µ –∏–≥—Ä–∞—Ç—å <span id="readyCount">0/16</span></h2>
                            <div id="readyPlayersList" class="ready-players-list">
                                <!-- 16 –ø–æ–∑–∏—Ü–∏–π –¥–ª—è –≥–æ—Ç–æ–≤—ã—Ö –∏–≥—Ä–∞—Ç—å -->
                            </div>
                            <button id="toLineupStageBtn" class="btn btn-primary" style="width: 100%; margin-top: 15px;">‚Üí –î–∞–ª–µ–µ –∫ —Ä–∞—Å—Å—Ç–∞–Ω–æ–≤–∫–µ</button>
                        </section>
                    </div>
                </div>

                <!-- –≠—Ç–∞–ø 2: –†–∞—Å—Å—Ç–∞–Ω–æ–≤–∫–∞ (–ì–æ—Ç–æ–≤—ã–µ –∏–≥—Ä–∞—Ç—å + –†–∞—Å—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–æ –∑–≤–µ–Ω—å—è–º) -->
                <div id="stage2Section" class="stage-section" style="display: none;">
                    <button id="backToReadyBtn" class="btn btn-secondary" style="margin-bottom: 15px;">‚Üê –ù–∞–∑–∞–¥ –∫ —Å–ø–∏—Å–∫—É –≥–æ—Ç–æ–≤—ã—Ö</button>
                    
                    <div class="two-columns-layout">
                        <!-- –ö–æ–ª–æ–Ω–∫–∞ 1: –ì–æ—Ç–æ–≤—ã–µ –∏–≥—Ä–∞—Ç—å (–∫–æ–º–ø–∞–∫—Ç–Ω–∞—è) -->
                        <section class="ready-column-compact">
                            <h2>–ì–æ—Ç–æ–≤—ã–µ –∏–≥—Ä–∞—Ç—å <span id="readyCount2">0/16</span></h2>
                            <div id="readyPlayersList2" class="ready-players-compact">
                                <!-- 16 –∏–≥—Ä–æ–∫–æ–≤ –∫–æ–º–ø–∞–∫—Ç–Ω–æ -->
                            </div>
                        </section>

                        <!-- –ö–æ–ª–æ–Ω–∫–∞ 2: –†–∞—Å—Å—Ç–∞–Ω–æ–≤–∫–∞ -->
                        <section class="lineup-column-full">
                            <h2>–†–∞—Å—Å—Ç–∞–Ω–æ–≤–∫–∞</h2>
                            <!-- –í—Ä–∞—Ç–∞—Ä—å -->
                            <div class="goalie-section">
                                <h3>–í—Ä–∞—Ç–∞—Ä—å</h3>
                                <div id="goalieSlot" class="lineup-slot goalie-slot">
                                    <!-- –í—Ä–∞—Ç–∞—Ä—å –±—É–¥–µ—Ç –∑–¥–µ—Å—å -->
                                </div>
                            </div>
                            <!-- –¢—Ä–∏ –∑–≤–µ–Ω–∞ -->
                            <div id="linesContainer" class="lines-container-full">
                                <!-- –ó–≤–µ–Ω—å—è –±—É–¥—É—Ç —Å–æ–∑–¥–∞–Ω—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                            </div>
                        </section>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∏–≥—Ä–æ–∫–∞ -->
    <div id="addPlayerModal" class="modal">
        <div class="modal-content">
            <span class="close" data-modal="addPlayerModal">&times;</span>
            <h2>–î–æ–±–∞–≤–∏—Ç—å –∏–≥—Ä–æ–∫–∞</h2>
            <form id="addPlayerForm">
                <div class="form-group">
                    <label for="playerName">–ò–º—è –∏–≥—Ä–æ–∫–∞:</label>
                    <input type="text" id="playerName" required>
                </div>
                <div class="form-group">
                    <label for="playerNumber">–ù–æ–º–µ—Ä:</label>
                    <input type="number" id="playerNumber" min="1" max="99">
                </div>
                <div class="form-group">
                    <label for="playerPosition">–ü–æ–∑–∏—Ü–∏—è:</label>
                    <select id="playerPosition">
                        <option value="–í—Ä–∞—Ç–∞—Ä—å">–í—Ä–∞—Ç–∞—Ä—å</option>
                        <option value="–ó–∞—â–∏—Ç–Ω–∏–∫">–ó–∞—â–∏—Ç–Ω–∏–∫</option>
                        <option value="–ù–∞–ø–∞–¥–∞—é—â–∏–π">–ù–∞–ø–∞–¥–∞—é—â–∏–π</option>
                    </select>
                </div>
                <button type="submit" class="btn btn-primary">–î–æ–±–∞–≤–∏—Ç—å</button>
            </form>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏–≥—Ä–æ–∫–∞ -->
    <div id="editPlayerModal" class="modal">
        <div class="modal-content">
            <span class="close" data-modal="editPlayerModal">&times;</span>
            <h2>–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–≥—Ä–æ–∫–∞</h2>
            <form id="editPlayerForm">
                <input type="hidden" id="editPlayerId">
                <div class="form-group">
                    <label for="editPlayerName">–ò–º—è –∏–≥—Ä–æ–∫–∞:</label>
                    <input type="text" id="editPlayerName" required>
                </div>
                <div class="form-group">
                    <label for="editPlayerNumber">–ù–æ–º–µ—Ä:</label>
                    <input type="number" id="editPlayerNumber" min="1" max="99">
                </div>
                <div class="form-group">
                    <label for="editPlayerPosition">–ü–æ–∑–∏—Ü–∏—è:</label>
                    <select id="editPlayerPosition">
                        <option value="–í—Ä–∞—Ç–∞—Ä—å">–í—Ä–∞—Ç–∞—Ä—å</option>
                        <option value="–ó–∞—â–∏—Ç–Ω–∏–∫">–ó–∞—â–∏—Ç–Ω–∏–∫</option>
                        <option value="–ù–∞–ø–∞–¥–∞—é—â–∏–π">–ù–∞–ø–∞–¥–∞—é—â–∏–π</option>
                    </select>
                </div>
                <button type="submit" class="btn btn-primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
            </form>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è –∏–≥—Ä—ã -->
    <div id="deleteGameModal" class="modal">
        <div class="modal-content">
            <span class="close" data-modal="deleteGameModal">&times;</span>
            <h2>–£–¥–∞–ª–∏—Ç—å –∏–≥—Ä—É?</h2>
            <p>–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç—É –∏–≥—Ä—É? –≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–ª—å–∑—è –æ—Ç–º–µ–Ω–∏—Ç—å.</p>
            <div style="display: flex; gap: 10px; justify-content: flex-end; margin-top: 20px;">
                <button class="btn btn-secondary" onclick="closeModal('deleteGameModal')">–û—Ç–º–µ–Ω–∞</button>
                <button id="confirmDeleteGameBtn" class="btn btn-primary" style="background: var(--highlight-color);">–£–¥–∞–ª–∏—Ç—å</button>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è –∏–≥—Ä–æ–∫–∞ -->
    <div id="deletePlayerModal" class="modal">
        <div class="modal-content">
            <span class="close" data-modal="deletePlayerModal">&times;</span>
            <h2>–£–¥–∞–ª–∏—Ç—å –∏–≥—Ä–æ–∫–∞?</h2>
            <p id="deletePlayerMessage">–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ–≥–æ –∏–≥—Ä–æ–∫–∞ –∏–∑ –∫–æ–º–∞–Ω–¥—ã? –û–Ω –±—É–¥–µ—Ç —É–¥–∞–ª–µ–Ω –∏–∑ –≤—Å–µ—Ö –∏–≥—Ä. –≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–ª—å–∑—è –æ—Ç–º–µ–Ω–∏—Ç—å.</p>
            <div style="display: flex; gap: 10px; justify-content: flex-end; margin-top: 20px;">
                <button class="btn btn-secondary" onclick="closeModal('deletePlayerModal')">–û—Ç–º–µ–Ω–∞</button>
                <button id="confirmDeletePlayerBtn" class="btn btn-primary" style="background: var(--highlight-color);">–£–¥–∞–ª–∏—Ç—å</button>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞ –¥–∞–Ω–Ω—ã—Ö -->
    <div id="importDataModal" class="modal">
        <div class="modal-content">
            <span class="close" data-modal="importDataModal">&times;</span>
            <h2>–ò–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö</h2>
            <p style="margin-bottom: 15px; color: var(--warning-color);">‚ö†Ô∏è –í–Ω–∏–º–∞–Ω–∏–µ: –ò–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö –∑–∞–º–µ–Ω–∏—Ç –≤—Å–µ —Ç–µ–∫—É—â–∏–µ –¥–∞–Ω–Ω—ã–µ (–∫–æ–º–∞–Ω–¥—É –∏ –∏–≥—Ä—ã). –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–ª–∏ —Ç–µ–∫—É—â–∏–µ –¥–∞–Ω–Ω—ã–µ –ø–µ—Ä–µ–¥ –∏–º–ø–æ—Ä—Ç–æ–º!</p>
            <div class="form-group">
                <label for="importFileInput">–í—ã–±–µ—Ä–∏—Ç–µ JSON —Ñ–∞–π–ª:</label>
                <input type="file" id="importFileInput" accept=".json" style="margin-top: 10px;">
            </div>
            <div style="display: flex; gap: 10px; justify-content: flex-end; margin-top: 20px;">
                <button class="btn btn-secondary" onclick="closeModal('importDataModal')">–û—Ç–º–µ–Ω–∞</button>
                <button id="confirmImportBtn" class="btn btn-primary">–ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å</button>
            </div>
        </div>
    </div>

    <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è —ç–∫—Å–ø–æ—Ä—Ç–∞ –≤ JPEG (—Å–∫—Ä—ã—Ç, –Ω–æ –≤–∏–¥–∏–º –¥–ª—è html2canvas) -->
    <div id="exportContainer" style="position: fixed; top: 0; left: 0; width: 2480px; height: 3508px; overflow: hidden; z-index: -1; pointer-events: none;">
        <div id="exportContent" class="export-a4"></div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="app.js"></script>
</body>
</html>